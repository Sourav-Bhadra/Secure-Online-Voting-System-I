<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Registration</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-F3w7mX95PdgyTmZZMECAngseQB83DfGTowi0iMjiWaeVhAn4FJkqJByhZMI3AhiU"
      crossorigin="anonymous"
    />
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-/bQdsTh/da6pkI1MST/rWKFNjaCP5gBSY4sEBT38Q/9RBh9AH40zEOg7Hlq2THRZ"
      crossorigin="anonymous"
    ></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <link rel="stylesheet" href="/css/styles.css" />
    <link rel="stylesheet" href="/css/style.css" />
  </head>

  <body>
    <div
      class="row shadow-lg p-3 mb-5 bg-body rounde"
      style="border-radius: 2%"
    >
      <!-- instructions -->
      <div id="popupmain" style="display: none">
        <div id="popup">
          <h1 id="newsHeading" style="padding-top: 3px">Instruction load...</h1>
          <button id="buttonid">OK</button>
        </div>
      </div>

      <!--Left half -->

      <div class="col-lg-5">
        <center>
          <img
            class="voting-img"
            src="https://image.freepik.com/free-vector/voting-concept-illustration_114360-5972.jpg"
            alt=""
          />
        </center>

        <!--
            <div class="instructions">
                <h3>Step 1: Fill the required fields carefully</h3>
                <h3>Step 2: Upload the necessary documents in high clarity.</h3>
                <h3>Step 3: Check all the details and click REGISTER.</h3>
            </div>   
            
            https://png.pngtree.com/png-clipart/20201208/original/pngtree-hand-drawn-cartoon-american-presidential-election-love-box-illustration-png-image_5525991.jpg
        
        -->
      </div>

      <!--Right half -->

      <div class="col-lg-7 right">
        <h2>Get Started</h2>
        <p>
          Already have an account. <a th:href="@{'/index'}"> Log in </a> here.
        </p>
        <form
          class="row g-3"
          style="margin: 10px 20px"
          th:action="@{/register}"
          method="post"
          th:object="${user}"
          enctype="multipart/form-data"
        >
          <div>
            <div class="col">
              <label for="inputEmail4" class="form-label">First Name</label>
              <input
                id="fname"
                type="text"
                th:field="*{firstname}"
                required
                class="form-control"
                placeholder="First name"
              />
            </div>
            <div class="col">
              <label for="inputEmail4" class="form-label">Last Name</label>
              <input
                id="lname"
                type="text"
                th:field="*{lastname}"
                required
                class="form-control"
                placeholder="Last name"
              />
            </div>
            <div class="col">
              <label for="inputEmail4" class="form-label">Password</label>
              <input
                id="pass"
                type="password"
                th:field="*{password}"
                required
                class="form-control"
                placeholder="Password (at least 8 character)"
              />
            </div>
          </div>

          <div class="col-md-6">
            <label for="inputDOB" class="form-label">Date of Birth</label>
            <input
              id="birth"
              type="date"
              th:field="*{birthday}"
              required
              class="form-control"
              placeholder="DD/MM/YYYY"
            />
          </div>
          <div class="col-md-6">
            <label for="inputState" class="form-label">Gender</label>
            <select
              id="inputState"
              th:field="*{gender}"
              required
              class="form-select"
            >
              <option
                th:each="p : ${listgender}"
                th:value="${p}"
                th:text="${p}"
              ></option>
            </select>
          </div>
          <div class="col-12">
            <label for="inputMobile" class="form-label">Mobile Number</label>
            <input
              type="text"
              th:field="*{mobileno}"
              required
              class="form-control"
              id="inputmobile"
              placeholder="Enter your Mobile Number"
            />
          </div>
          <div class="col-12">
            <label for="inputEmail" class="form-label">Email</label>
            <input
              type="text"
              th:field="*{email}"
              required
              class="form-control"
              id="inputEmail"
              placeholder="Enter your email"
            />
          </div>
          <div class="col-12">
            <label for="inputAddress" class="form-label">Adhaar No.</label>
            <input
              id="adhaar"
              type="text"
              th:field="*{username}"
              required
              class="form-control"
              placeholder="Enter your 12 digit Adhaar number"
            />
          </div>

          <div div class="col-12">
            <label>Photos: </label>
            <input
              type="file"
              name="image"
              id="fileimage"
              required
              class="form-control"
              accept="image/png, image/jpeg, image/jpg"
            /><br />

            <p>
              <img
                id="thumbnail"
                alt="Logo Preview"
                src=""
                height="200px"
                width="150px"
                style="margin-left: 200px"
              />
            </p>
          </div>

          <div class="col-12">
            <label for="inputAddress2" class="form-label">Address</label>
            <input
              type="text"
              th:field="*{address}"
              required
              class="form-control"
              id="inputAddress2"
              placeholder="Apartment, studio, or floor"
            />
          </div>

          <div class="col-md-4">
            <label for="inputState" class="form-label">State</label>
            <select
              id="inputState"
              th:field="*{state}"
              required
              class="form-select"
            >
              <option
                th:each="l : ${liststates}"
                th:value="${l}"
                th:text="${l}"
              ></option>
            </select>
          </div>

          <div class="col-md-4">
            <label for="inputCity" class="form-label">City</label>
            <input
              type="text"
              th:field="*{city}"
              required
              class="form-control"
              id="inputCity"
            />
          </div>
          <div class="col-md-4">
            <label for="inputZip" class="form-label">Zip</label>
            <input
              type="text"
              th:field="*{zip}"
              required
              class="form-control"
              id="inputZip"
            />
          </div>
          <div class="col-12">
            <div class="form-check">
              <input
                class="form-check-input"
                required
                type="checkbox"
                id="gridCheck"
              />
              <label class="form-check-label" for="gridCheck">
                I agree to all Terms and Conditions.
              </label>
            </div>
          </div>
          <div class="col-12">
            <div class="d-grid gap-2">
              <button
                type="button"
                id="btn"
                class="btn btn-outline-primary btn-lg"
                onclick="sweetalertclick()"
              >
                Register
              </button>
              <button
                type="submit"
                id="btn1"
                hidden
                class="btn btn-outline-primary btn-lg"
              >
                Register
              </button>
            </div>
          </div>
        </form>
      </div>
    </div>
    <script src="/SweetAlert/sweetalert2.all.min.js"></script>
    <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
    <script type="text/javascript" th:inline="javascript">
      function sweetalertclick() {
        var fname = $("#fname").val();
        var lname = $("#lname").val();
        var pass = $("#pass").val();
        var birth = $("#birth").val();
        var gender = $("#gender").val();
        var adhaar = $("#adhaar").val();
        var photo = $("#fileimage").val();
        var add = $("#inputAddress2").val();
        var inputState = $("#inputstate").val();
        var city = $("#inputCity").val();
        var zip = $("#inputZip").val();
        var gridcheck = document.getElementById("gridCheck").checked;

        if (
          fname == "" ||
          lname == "" ||
          pass == "" ||
          birth == "" ||
          gender == "" ||
          adhaar == "" ||
          photo == "" ||
          add == "" ||
          inputState == "" ||
          city == "" ||
          zip == "" ||
          gridcheck == false
        ) {
          swal({
            title: "Fields empty",
            text: "Please check the fields",
            icon: "warning",
            button: "ok",
          });
        } else {
          swal({
            title: "Are you sure?",
            text: "Once Click your data will be saved to us!",
            icon: "warning",
            buttons: true,
            dangerMode: true,
          }).then((willDelete) => {
            if (willDelete) {
              document.getElementById("btn1").click();
              swal({
                title: "Registration Successful",
                text: "Redirecting you to the Login Page",
                icon: "success",
                buttons: false,
              }).then(function () {
                //document.getElementById("btn1").click();
                document.write("Redirecting to Index Page");
                // document.location.href = '/index'
              });
            } else {
              swal("Your data is not save!");
            }
          });
        }
      }

      $(document).ready(function () {
        $("#fileimage").change(function () {
          showImageThumbnail(this);
        });
      });

      function showImageThumbnail(fileInput) {
        file = fileInput.files[0];
        reader = new FileReader();

        reader.onload = function (e) {
          $("#thumbnail").attr("src", e.target.result);
        };
        reader.readAsDataURL(file);
      }
    </script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script>
      $(document).ready(function () {
        setTimeout(function () {
          $("#popupmain").css("display", "block");
        }, 3000);
      });

      $("#buttonid").click(function () {
        $("#popupmain").css("display", "none");
      });
    </script>
  </body>
</html>
