<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="ISO-8859-1">
    <title>User Registration</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <style type="text/css">
        label {
            display: inline-block;
            width: 200px;
            margin: 5px;
            text-align: left;
        }
        
        input[type=text],
        input[type=password],
        select {
            display: inline-block;
            width: 200px;
        }
        
        input[type=radio],
        input[type=file] {
            margin-left: 45px;
        }
        
        input[type=checkbox] {
            margin-right: 190px;
        }
        
        button {
            padding: 5px;
            margin: 10px;
        }
    </style>
</head>

<body>
    <div align="center">
        <h1>User Registration</h1>
        <form action="#" th:action="@{/register}" method="post" th:object="${user}" enctype="multipart/form-data">

            <label>Adhar ID:</label>
            <input type="text" th:field="*{username}" required/><br/>

            <label>First name:</label>
            <input type="text" th:field="*{firstname}" required/><br/>

            <label>Last name:</label>
            <input type="text" th:field="*{lastname}" required/><br/>

            <label>E-mail:</label>
            <input type="text" th:field="*{email}" required /><br/>

            <label>Password:</label>
            <input type="password" th:field="*{password}" /><br/>

            <label>Gender:</label>
            <input type="radio" th:field="*{gender}" value="Male" />Male
            <input type="radio" th:field="*{gender}" value="Female" />Female<br/>

            <label>Married?</label>
            <input type="checkbox" th:field="*{married}" /><br/>

            <label>Date of Birth (yyyy-mm-dd):</label>
            <input type="date" th:field="*{birthday}" /><br/>

            <label>Photos: </label>
            <input type="file" name="image" id="fileimage" accept="image/png, image/jpeg, image/jpg" /><br/>

            <p> <img id="thumbnail" alt="Logo Preview" src="" height="150px" width="150px">
            </p>

            <!--
            <label>Profession:</label>
            <select th:field="*{profession}">
				<option th:each="p : ${listProfession}" th:value="${p}" th:text="${p}" />
			</select>
            <br/>

            

            <label>Note:</label>
            <textarea rows="5" cols="25" th:field="*{note}"></textarea>
            <br/>
        -->

            <label>Address:</label>
            <input type="text" th:field="*{address}" /><br/>

            <label>State:</label>
            <select th:field="*{state}">
				<option th:each="p : ${liststates}" th:value="${p}" th:text="${p}" />
			</select>
            <br/>

            <label>City:</label>
            <input type="text" th:field="*{city}" /><br/>

            <label>Zip:</label>
            <input type="text" th:field="*{zip}" /><br/>



            <button type="button" id="btn" onclick="sweetalertclick()">Register </button>
            <button type="submit" id="btn1">Register 1</button>
        </form>

    </div>
    <script src="/SweetAlert/sweetalert2.all.min.js"></script>
    <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
    <script type="text/javascript">
        function sweetalertclick() {
            swal({
                    title: "Are you sure?",
                    text: "Once Click your data will be saved to us!",
                    icon: "warning",
                    buttons: true,
                    dangerMode: true,
                })
                .then((willDelete) => {
                    if (willDelete) {
                        document.getElementById("btn1").click();
                        Swal.fire(
                            'Registration Successful',
                            'Redirecting you to the Login Page',
                            'success'
                        ).then(function() {
                            var l = '@{/index}'
                            th: href = l
                        })
                    } else {
                        swal("Your imaginary file is safe!");
                    }
                });
        }


        $(document).ready(function() {

            $('#fileimage').change(function() {
                showImageThumbnail(this);
            });

        });

        function showImageThumbnail(fileInput) {
            file = fileInput.files[0];
            reader = new FileReader();

            reader.onload = function(e) {
                $('#thumbnail').attr('src', e.target.result);
            };
            reader.readAsDataURL(file);
        }
    </script>
</body>

</html>